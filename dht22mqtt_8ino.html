<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>K-AIoT: src/dht22mqtt.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">K-AIoT<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">dht22mqtt.ino File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;ESP8266WiFi.h&gt;</code><br />
<code>#include &lt;PubSubClient.h&gt;</code><br />
<code>#include &quot;DHT.h&quot;</code><br />
</div>
<p><a href="dht22mqtt_8ino_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2c509dba12bba99883a5be9341b7a0c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a2c509dba12bba99883a5be9341b7a0c5">DHTTYPE</a>&#160;&#160;&#160;DHT22</td></tr>
<tr class="separator:a2c509dba12bba99883a5be9341b7a0c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aee63e84c606cfaefce454689113c636c"><td class="memItemLeft" align="right" valign="top">PubSubClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#aee63e84c606cfaefce454689113c636c">client</a> (<a class="el" href="dht22_8ino.html#abd77e757e4b3bb6f1e4b42b21ea9e040">espClient</a>)</td></tr>
<tr class="separator:aee63e84c606cfaefce454689113c636c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954e8d8deb756924c12914cc3cffe82e"><td class="memItemLeft" align="right" valign="top">DHT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a954e8d8deb756924c12914cc3cffe82e">dht</a> (<a class="el" href="dht22_8ino.html#a36c07f4bebe4701d1682b3691a72307b">DHTPin</a>, <a class="el" href="dht22_8ino.html#a2c509dba12bba99883a5be9341b7a0c5">DHTTYPE</a>)</td></tr>
<tr class="separator:a954e8d8deb756924c12914cc3cffe82e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b88d967e3185d98053cf055c8b4f1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#ae5b88d967e3185d98053cf055c8b4f1f">setup_wifi</a> ()</td></tr>
<tr class="separator:ae5b88d967e3185d98053cf055c8b4f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab2f678ad886fb7a6c48a77ce97d410"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#aeab2f678ad886fb7a6c48a77ce97d410">callback</a> (char *topic, byte *message, unsigned int length)</td></tr>
<tr class="separator:aeab2f678ad886fb7a6c48a77ce97d410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bcd6ce7d04c38f8c4ff908d1fc50f86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a4bcd6ce7d04c38f8c4ff908d1fc50f86">reconnect</a> ()</td></tr>
<tr class="separator:a4bcd6ce7d04c38f8c4ff908d1fc50f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a587ba0cb07f02913598610049a3bbb79"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a587ba0cb07f02913598610049a3bbb79">ssid</a> = &quot;NTGR_E495&quot;</td></tr>
<tr class="separator:a587ba0cb07f02913598610049a3bbb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a2ebcb494493f648ae1e6975672575"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#aa4a2ebcb494493f648ae1e6975672575">password</a> = &quot;L9j29iAU&quot;</td></tr>
<tr class="separator:aa4a2ebcb494493f648ae1e6975672575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e20c6ce55a404e1725f43210525b3bc"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a8e20c6ce55a404e1725f43210525b3bc">MQTT_username</a> = &quot;kaiot&quot;</td></tr>
<tr class="separator:a8e20c6ce55a404e1725f43210525b3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561386b8c64656896f88a2e34c58dfe3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a561386b8c64656896f88a2e34c58dfe3">MQTT_password</a> = &quot;kebabsjappe&quot;</td></tr>
<tr class="separator:a561386b8c64656896f88a2e34c58dfe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62fa8557ef4586408dcbe2f1a09e839"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#ae62fa8557ef4586408dcbe2f1a09e839">mqtt_server</a> = &quot;192.168.1.22&quot;</td></tr>
<tr class="separator:ae62fa8557ef4586408dcbe2f1a09e839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd77e757e4b3bb6f1e4b42b21ea9e040"><td class="memItemLeft" align="right" valign="top">WiFiClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#abd77e757e4b3bb6f1e4b42b21ea9e040">espClient</a></td></tr>
<tr class="separator:abd77e757e4b3bb6f1e4b42b21ea9e040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c07f4bebe4701d1682b3691a72307b"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a36c07f4bebe4701d1682b3691a72307b">DHTPin</a> = 5</td></tr>
<tr class="separator:a36c07f4bebe4701d1682b3691a72307b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef90926c9a05dcb1b2fac4a9655e546"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a0ef90926c9a05dcb1b2fac4a9655e546">now</a> = millis()</td></tr>
<tr class="separator:a0ef90926c9a05dcb1b2fac4a9655e546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a70c9a32012cf238eaf48a9e52613e5"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dht22mqtt_8ino.html#a7a70c9a32012cf238eaf48a9e52613e5">lastMeasure</a> = 0</td></tr>
<tr class="separator:a7a70c9a32012cf238eaf48a9e52613e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a2c509dba12bba99883a5be9341b7a0c5" name="a2c509dba12bba99883a5be9341b7a0c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c509dba12bba99883a5be9341b7a0c5">&#9670;&#160;</a></span>DHTTYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DHTTYPE&#160;&#160;&#160;DHT22</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00011">11</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aeab2f678ad886fb7a6c48a77ce97d410" name="aeab2f678ad886fb7a6c48a77ce97d410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeab2f678ad886fb7a6c48a77ce97d410">&#9670;&#160;</a></span>callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void callback </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback function executed when a message is received on a subscribed topic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>The topic on which the message was received. </td></tr>
    <tr><td class="paramname">message</td><td>Pointer to the message payload. </td></tr>
    <tr><td class="paramname">length</td><td>Length of the message payload.</td></tr>
  </table>
  </dd>
</dl>
<p>This function prints the received message to the Serial monitor.</p>

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00064">64</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   64</span>                                                               {</div>
<div class="line"><span class="lineno">   74</span>  Serial.print(<span class="stringliteral">&quot;Message arrived on topic: &quot;</span>);</div>
<div class="line"><span class="lineno">   75</span>  Serial.print(topic);</div>
<div class="line"><span class="lineno">   76</span>  Serial.print(<span class="stringliteral">&quot;. Message: &quot;</span>);</div>
<div class="line"><span class="lineno">   77</span>  String msg;</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; length; i++) {</div>
<div class="line"><span class="lineno">   80</span>    Serial.print((<span class="keywordtype">char</span>)message[i]);</div>
<div class="line"><span class="lineno">   81</span>    msg += (char)message[i];</div>
<div class="line"><span class="lineno">   82</span>  }</div>
<div class="line"><span class="lineno">   83</span>  Serial.println();</div>
<div class="line"><span class="lineno">   84</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aee63e84c606cfaefce454689113c636c" name="aee63e84c606cfaefce454689113c636c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee63e84c606cfaefce454689113c636c">&#9670;&#160;</a></span>client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PubSubClient client </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dht22_8ino.html#abd77e757e4b3bb6f1e4b42b21ea9e040">espClient</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a954e8d8deb756924c12914cc3cffe82e" name="a954e8d8deb756924c12914cc3cffe82e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954e8d8deb756924c12914cc3cffe82e">&#9670;&#160;</a></span>dht()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DHT dht </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dht22_8ino.html#a36c07f4bebe4701d1682b3691a72307b">DHTPin</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dht22_8ino.html#a2c509dba12bba99883a5be9341b7a0c5">DHTTYPE</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executes the main loop of the ESP8266 device.</p>
<p>This function is executed repeatedly in a loop after the setup phase. It performs the following tasks:</p><ol type="1">
<li>Adds a delay of 500 milliseconds.</li>
<li>Checks if the client is not connected to the MQTT broker and calls the <a class="el" href="dht22mqtt_8ino.html#a4bcd6ce7d04c38f8c4ff908d1fc50f86">reconnect()</a> function if necessary.</li>
<li>Calls the client.loop() function to handle MQTT communication.</li>
<li>Updates the current time using millis().</li>
<li>Publishes new temperature and humidity values every 2 seconds.</li>
</ol>

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00139">139</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  139</span>            {</div>
<div class="line"><span class="lineno">  151</span>  delay(500);</div>
<div class="line"><span class="lineno">  152</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.connected()) {</div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_function" href="dht22mqtt_8ino.html#a4bcd6ce7d04c38f8c4ff908d1fc50f86">reconnect</a>();</div>
<div class="line"><span class="lineno">  154</span>  }</div>
<div class="line"><span class="lineno">  155</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.loop())</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.connect(<span class="stringliteral">&quot;ESP8266Client&quot;</span>, <a class="code hl_variable" href="dht22mqtt_8ino.html#a8e20c6ce55a404e1725f43210525b3bc">MQTT_username</a>, <a class="code hl_variable" href="dht22mqtt_8ino.html#a561386b8c64656896f88a2e34c58dfe3">MQTT_password</a>);</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>  <a class="code hl_variable" href="dht22mqtt_8ino.html#a0ef90926c9a05dcb1b2fac4a9655e546">now</a> = millis();</div>
<div class="line"><span class="lineno">  159</span>  <span class="comment">// Publishes new temperature and humidity every 2 seconds</span></div>
<div class="line"><span class="lineno">  160</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="dht22mqtt_8ino.html#a0ef90926c9a05dcb1b2fac4a9655e546">now</a> - <a class="code hl_variable" href="dht22mqtt_8ino.html#a7a70c9a32012cf238eaf48a9e52613e5">lastMeasure</a> &gt; 2000) {</div>
<div class="line"><span class="lineno">  161</span>    <a class="code hl_variable" href="dht22mqtt_8ino.html#a7a70c9a32012cf238eaf48a9e52613e5">lastMeasure</a> = <a class="code hl_variable" href="dht22mqtt_8ino.html#a0ef90926c9a05dcb1b2fac4a9655e546">now</a>;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="comment">// Read humidity</span></div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordtype">float</span> humidity = <a class="code hl_function" href="dht22mqtt_8ino.html#a954e8d8deb756924c12914cc3cffe82e">dht</a>.readHumidity();</div>
<div class="line"><span class="lineno">  165</span>    <span class="comment">// int humidityInt = int(round(humidity)); // Used for testing</span></div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="comment">// Read temperature as Celsius (the default)</span></div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordtype">float</span> temperatureC = <a class="code hl_function" href="dht22mqtt_8ino.html#a954e8d8deb756924c12914cc3cffe82e">dht</a>.readTemperature(); </div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="comment">// Check if any reads failed and exit early (to try again)</span></div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">if</span> (isnan(humidity) || isnan(temperatureC)) {</div>
<div class="line"><span class="lineno">  172</span>      Serial.println(<span class="stringliteral">&quot;Failed to read from DHT sensor!&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  174</span>    }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    <span class="comment">// Publishes Temperature and Humidity values</span></div>
<div class="line"><span class="lineno">  177</span>    <a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.publish(<span class="stringliteral">&quot;sensors/temperature&quot;</span>, String(temperatureC).c_str());</div>
<div class="line"><span class="lineno">  178</span>    <a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.publish(<span class="stringliteral">&quot;sensors/humidity&quot;</span>, String(humidity).c_str());</div>
<div class="line"><span class="lineno">  179</span>    <span class="comment">// Uncomment to publish temperature in Fahrenheit degrees</span></div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">// float temperatureF = dht.readTemperature(true);</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="comment">// client.publish(&quot;room/temperature&quot;, String(temperatureF).c_str());</span></div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    Serial.print(<span class="stringliteral">&quot;Humidity: &quot;</span>);</div>
<div class="line"><span class="lineno">  184</span>    Serial.print(humidity);</div>
<div class="line"><span class="lineno">  185</span>    Serial.print(<span class="stringliteral">&quot; %    &quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>    Serial.print(<span class="stringliteral">&quot;Temperature: &quot;</span>);</div>
<div class="line"><span class="lineno">  187</span>    Serial.print(temperatureC);</div>
<div class="line"><span class="lineno">  188</span>    Serial.println(<span class="stringliteral">&quot; ÂºC&quot;</span>);</div>
<div class="line"><span class="lineno">  189</span>  }</div>
<div class="line"><span class="lineno">  190</span>}</div>
<div class="ttc" id="adht22_8ino_html_aee63e84c606cfaefce454689113c636c"><div class="ttname"><a href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a></div><div class="ttdeci">PubSubClient client(espClient)</div></div>
<div class="ttc" id="adht22mqtt_8ino_html_a0ef90926c9a05dcb1b2fac4a9655e546"><div class="ttname"><a href="dht22mqtt_8ino.html#a0ef90926c9a05dcb1b2fac4a9655e546">now</a></div><div class="ttdeci">long now</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00036">dht22mqtt.ino:36</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_a4bcd6ce7d04c38f8c4ff908d1fc50f86"><div class="ttname"><a href="dht22mqtt_8ino.html#a4bcd6ce7d04c38f8c4ff908d1fc50f86">reconnect</a></div><div class="ttdeci">void reconnect()</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00087">dht22mqtt.ino:87</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_a561386b8c64656896f88a2e34c58dfe3"><div class="ttname"><a href="dht22mqtt_8ino.html#a561386b8c64656896f88a2e34c58dfe3">MQTT_password</a></div><div class="ttdeci">const char * MQTT_password</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00019">dht22mqtt.ino:19</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_a7a70c9a32012cf238eaf48a9e52613e5"><div class="ttname"><a href="dht22mqtt_8ino.html#a7a70c9a32012cf238eaf48a9e52613e5">lastMeasure</a></div><div class="ttdeci">long lastMeasure</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00037">dht22mqtt.ino:37</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_a8e20c6ce55a404e1725f43210525b3bc"><div class="ttname"><a href="dht22mqtt_8ino.html#a8e20c6ce55a404e1725f43210525b3bc">MQTT_username</a></div><div class="ttdeci">const char * MQTT_username</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00018">dht22mqtt.ino:18</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_a954e8d8deb756924c12914cc3cffe82e"><div class="ttname"><a href="dht22mqtt_8ino.html#a954e8d8deb756924c12914cc3cffe82e">dht</a></div><div class="ttdeci">DHT dht(DHTPin, DHTTYPE)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4bcd6ce7d04c38f8c4ff908d1fc50f86" name="a4bcd6ce7d04c38f8c4ff908d1fc50f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bcd6ce7d04c38f8c4ff908d1fc50f86">&#9670;&#160;</a></span>reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that reconnects the ESP8266 to the MQTT broker.</p>
<p>This function attempts to establish a connection to the MQTT broker and subscribe to the desired topics. If the connection fails, it waits for 5 seconds before retrying. This function is called in the main loop if the connection to the broker is lost.</p>

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00087">87</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   87</span>                 {</div>
<div class="line"><span class="lineno">   95</span>  <span class="comment">// Loop until connection is reestablished</span></div>
<div class="line"><span class="lineno">   96</span>  <span class="keywordflow">while</span> (!<a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.connected()) {</div>
<div class="line"><span class="lineno">   97</span>    Serial.print(<span class="stringliteral">&quot;Attempting MQTT connection...&quot;</span>);</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.connect(<span class="stringliteral">&quot;DHT22Sensor&quot;</span>, <a class="code hl_variable" href="dht22mqtt_8ino.html#a8e20c6ce55a404e1725f43210525b3bc">MQTT_username</a>, <a class="code hl_variable" href="dht22mqtt_8ino.html#a561386b8c64656896f88a2e34c58dfe3">MQTT_password</a>)) {</div>
<div class="line"><span class="lineno">   99</span>      Serial.println(<span class="stringliteral">&quot;connected&quot;</span>);</div>
<div class="line"><span class="lineno">  100</span>      <span class="comment">// Subscribe to a topic</span></div>
<div class="line"><span class="lineno">  101</span>      <span class="comment">// client.subscribe(&quot;sensors/test&quot;); // Used for testing</span></div>
<div class="line"><span class="lineno">  102</span>      <span class="comment">// client.subscribe(&quot;sensors/test2&quot;); // Add lines like this to subscribe to multiple topics</span></div>
<div class="line"><span class="lineno">  103</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  104</span>      Serial.print(<span class="stringliteral">&quot;failed, rc=&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>      Serial.print(<a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.state());</div>
<div class="line"><span class="lineno">  106</span>      Serial.println(<span class="stringliteral">&quot; try again in 5 seconds&quot;</span>);</div>
<div class="line"><span class="lineno">  107</span>      <span class="comment">// Wait 5 seconds before retrying</span></div>
<div class="line"><span class="lineno">  108</span>      delay(5000);</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="line"><span class="lineno">  110</span>  }</div>
<div class="line"><span class="lineno">  111</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the setup of the ESP8266 device.</p>
<p>This function initializes the DHT sensor, serial communication, WiFi connection, MQTT broker configuration, and sets the callback function for message handling. It is called once during the setup phase of the device.</p>

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00113">113</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>             {</div>
<div class="line"><span class="lineno">  114</span>  <a class="code hl_function" href="dht22mqtt_8ino.html#a954e8d8deb756924c12914cc3cffe82e">dht</a>.begin(); </div>
<div class="line"><span class="lineno">  115</span>  Serial.begin(115200);</div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_function" href="dht22mqtt_8ino.html#ae5b88d967e3185d98053cf055c8b4f1f">setup_wifi</a>(); <span class="comment">// Connect to the WiFi</span></div>
<div class="line"><span class="lineno">  117</span>  <a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.setServer(<a class="code hl_variable" href="dht22mqtt_8ino.html#ae62fa8557ef4586408dcbe2f1a09e839">mqtt_server</a>, 1883); <span class="comment">// Sets the MQTT broker</span></div>
<div class="line"><span class="lineno">  118</span>  <a class="code hl_function" href="dht22_8ino.html#aee63e84c606cfaefce454689113c636c">client</a>.setCallback(<a class="code hl_function" href="dht22mqtt_8ino.html#aeab2f678ad886fb7a6c48a77ce97d410">callback</a>); <span class="comment">// Sets the callback to be sent to the callback() function</span></div>
<div class="line"><span class="lineno">  119</span>}</div>
<div class="ttc" id="adht22mqtt_8ino_html_ae5b88d967e3185d98053cf055c8b4f1f"><div class="ttname"><a href="dht22mqtt_8ino.html#ae5b88d967e3185d98053cf055c8b4f1f">setup_wifi</a></div><div class="ttdeci">void setup_wifi()</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00040">dht22mqtt.ino:40</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_ae62fa8557ef4586408dcbe2f1a09e839"><div class="ttname"><a href="dht22mqtt_8ino.html#ae62fa8557ef4586408dcbe2f1a09e839">mqtt_server</a></div><div class="ttdeci">const char * mqtt_server</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00022">dht22mqtt.ino:22</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_aeab2f678ad886fb7a6c48a77ce97d410"><div class="ttname"><a href="dht22mqtt_8ino.html#aeab2f678ad886fb7a6c48a77ce97d410">callback</a></div><div class="ttdeci">void callback(char *topic, byte *message, unsigned int length)</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00064">dht22mqtt.ino:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5b88d967e3185d98053cf055c8b4f1f" name="ae5b88d967e3185d98053cf055c8b4f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5b88d967e3185d98053cf055c8b4f1f">&#9670;&#160;</a></span>setup_wifi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_wifi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that connects the ESP8266 to the Wi-Fi network.</p>
<p>It initializes the Wi-Fi connection and waits until the connection is established.</p>

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00040">40</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                  {</div>
<div class="line"><span class="lineno">   46</span>  delay(10);</div>
<div class="line"><span class="lineno">   47</span>  <span class="comment">// Starting by connecting to a WiFi network</span></div>
<div class="line"><span class="lineno">   48</span>  Serial.println();</div>
<div class="line"><span class="lineno">   49</span>  Serial.print(<span class="stringliteral">&quot;Connecting to &quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>  Serial.println(<a class="code hl_variable" href="dht22mqtt_8ino.html#a587ba0cb07f02913598610049a3bbb79">ssid</a>);</div>
<div class="line"><span class="lineno">   51</span>  WiFi.begin(<a class="code hl_variable" href="dht22mqtt_8ino.html#a587ba0cb07f02913598610049a3bbb79">ssid</a>, <a class="code hl_variable" href="dht22mqtt_8ino.html#aa4a2ebcb494493f648ae1e6975672575">password</a>);</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">while</span> (WiFi.status() != WL_CONNECTED) {</div>
<div class="line"><span class="lineno">   53</span>    delay(500);</div>
<div class="line"><span class="lineno">   54</span>    Serial.print(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">   55</span>  }</div>
<div class="line"><span class="lineno">   56</span>  Serial.println(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">   57</span>  Serial.print(<span class="stringliteral">&quot;WiFi connected - ESP IP address: &quot;</span>);</div>
<div class="line"><span class="lineno">   58</span>  Serial.println(WiFi.localIP());</div>
<div class="line"><span class="lineno">   59</span>}</div>
<div class="ttc" id="adht22mqtt_8ino_html_a587ba0cb07f02913598610049a3bbb79"><div class="ttname"><a href="dht22mqtt_8ino.html#a587ba0cb07f02913598610049a3bbb79">ssid</a></div><div class="ttdeci">const char * ssid</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00014">dht22mqtt.ino:14</a></div></div>
<div class="ttc" id="adht22mqtt_8ino_html_aa4a2ebcb494493f648ae1e6975672575"><div class="ttname"><a href="dht22mqtt_8ino.html#aa4a2ebcb494493f648ae1e6975672575">password</a></div><div class="ttdeci">const char * password</div><div class="ttdef"><b>Definition:</b> <a href="dht22mqtt_8ino.html#l00015">dht22mqtt.ino:15</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a36c07f4bebe4701d1682b3691a72307b" name="a36c07f4bebe4701d1682b3691a72307b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36c07f4bebe4701d1682b3691a72307b">&#9670;&#160;</a></span>DHTPin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int DHTPin = 5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00030">30</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="abd77e757e4b3bb6f1e4b42b21ea9e040" name="abd77e757e4b3bb6f1e4b42b21ea9e040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd77e757e4b3bb6f1e4b42b21ea9e040">&#9670;&#160;</a></span>espClient</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WiFiClient espClient</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00026">26</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="a7a70c9a32012cf238eaf48a9e52613e5" name="a7a70c9a32012cf238eaf48a9e52613e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a70c9a32012cf238eaf48a9e52613e5">&#9670;&#160;</a></span>lastMeasure</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lastMeasure = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00037">37</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="a561386b8c64656896f88a2e34c58dfe3" name="a561386b8c64656896f88a2e34c58dfe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a561386b8c64656896f88a2e34c58dfe3">&#9670;&#160;</a></span>MQTT_password</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* MQTT_password = &quot;kebabsjappe&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00019">19</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="ae62fa8557ef4586408dcbe2f1a09e839" name="ae62fa8557ef4586408dcbe2f1a09e839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62fa8557ef4586408dcbe2f1a09e839">&#9670;&#160;</a></span>mqtt_server</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* mqtt_server = &quot;192.168.1.22&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00022">22</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="a8e20c6ce55a404e1725f43210525b3bc" name="a8e20c6ce55a404e1725f43210525b3bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e20c6ce55a404e1725f43210525b3bc">&#9670;&#160;</a></span>MQTT_username</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* MQTT_username = &quot;kaiot&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00018">18</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="a0ef90926c9a05dcb1b2fac4a9655e546" name="a0ef90926c9a05dcb1b2fac4a9655e546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef90926c9a05dcb1b2fac4a9655e546">&#9670;&#160;</a></span>now</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long now = millis()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00036">36</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="aa4a2ebcb494493f648ae1e6975672575" name="aa4a2ebcb494493f648ae1e6975672575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4a2ebcb494493f648ae1e6975672575">&#9670;&#160;</a></span>password</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* password = &quot;L9j29iAU&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00015">15</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
<a id="a587ba0cb07f02913598610049a3bbb79" name="a587ba0cb07f02913598610049a3bbb79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587ba0cb07f02913598610049a3bbb79">&#9670;&#160;</a></span>ssid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ssid = &quot;NTGR_E495&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dht22mqtt_8ino_source.html#l00014">14</a> of file <a class="el" href="dht22mqtt_8ino_source.html">dht22mqtt.ino</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
